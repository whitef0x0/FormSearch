// Generated by CoffeeScript 1.6.2
(function() {
  var places, results, source, template;

  if ($("#template").length !== 0) {
    source = $("#template").html();
    template = Handlebars.compile(source);
    String.prototype.trim = function() {
      return this.replace(/^\s+|\s+$/g, '');
    };
    results = {};
    places = {};
    $.get('/api/places', function(rsp) {
      return places = rsp;
    });
    $("#city").change(function() {
      var context, curr_id, html, out_places, place, _i, _len;

      curr_id = $("#city").find(":selected").val();
      out_places = [];
      for (_i = 0, _len = places.length; _i < _len; _i++) {
        place = places[_i];
        if (place.city_id + '' === curr_id) {
          out_places.push(place);
        }
      }
      context = {
        places: out_places
      };
      console.log(places);
      html = template(context);
      return $("#institution").html(html);
    }).trigger("change");
  }

  $(".showmenu").click(function(e) {
    var id;

    id = e.target.id;
    $("#" + id + ".menu").toggle("fold");
    return $("#" + id + " > i.icon-chevron-right").toggleClass("icon-rotate-90");
  });

  $(".print").printPage({
    attr: "href",
    message: "Preparing document for printing"
  });

}).call(this);
